<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dxw Playbook</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/dist/main.css" />
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>

  <body class="ready sticky">
    <a class="skip" id="skip-to-content" href="#main">Skip to content</a>
    <nav class="app-nav" aria-label="Main">

<ul>
  <li><a href="/">Playbook</a></li>
  <li>
    <a href="/guides">Guides</a>
    <ul>
      
      <li><a href="/guides/agile-delivery-phases.html">Agile delivery phases</a></li>
      
      <li><a href="/guides/being-a-tech-lead-at-dxw.html">Being a tech lead at dxw</a></li>
      
      <li><a href="/guides/card-sort.html">Card sorting</a></li>
      
      <li><a href="/guides/claiming-expenses.html">Claiming expenses</a></li>
      
      <li><a href="/guides/contributing.html">Contributing to the Playbook</a></li>
      
      <li><a href="/guides/daily-standups.html">Daily standups</a></li>
      
      <li><a href="/guides/dealing-with-an-incident.html">Dealing with an incident</a></li>
      
      <li><a href="/guides/design-career-progression-framework.html">Design career progression framework</a></li>
      
      <li><a href="/guides/development-workflow.html">Development workflow</a></li>
      
      <li><a href="/guides/getting-a-project-ready-for-support.html">Getting a project ready for support</a></li>
      
      <li><a href="/guides/plugin-advisories.html">GovPress plugin Advisories</a></li>
      
      <li><a href="/guides/plugin-reviews.html">GovPress plugin reviews</a></li>
      
      <li><a href="/guides/line-management-guides.html">Guides for Line Managers</a></li>
      
      <li><a href="/guides/how-we-do-pitches.html">How we do pitches</a></li>
      
      <li><a href="/guides/how-we-do-user-research.html">How we do user research</a></li>
      
      <li><a href="/guides/inclusion-diversity-equality.html">Inclusion, diversity and equal opportunities policy</a></li>
      
      <li><a href="/guides/junior-developer-development-plan.html">Junior developer development plan</a></li>
      
      <li><a href="/guides/laptop-purchasing-policy.html">Laptop Purchasing Policy</a></li>
      
      <li><a href="/guides/learning-and-development.html">Learning and development</a></li>
      
      <li><a href="/guides/managing.html">Managing the Playbook</a></li>
      
      <li><a href="/guides/office-accessibility.html">Office accessibility</a></li>
      
      <li><a href="/guides/week-notes.html">Project weeknotes</a></li>
      
      <li><a href="/guides/running-a-discovery-kick-off-workshop.html">Running a discovery kick-off workshop</a></li>
      
      <li><a href="/guides/running-a-roadmapping-workshop.html">Running a roadmapping workshop</a></li>
      
      <li><a href="/guides/service-design-at-dxw.html">Service Design approach</a></li>
      
      <li><a href="/guides/setting-up-a-new-project.html">Setting up a new project</a></li>
      
      <li><a href="/guides/show-and-tells.html">Show and tells</a></li>
      
      <li><a href="/guides/sprint-planning.html">Sprint Planning</a></li>
      
      <li><a href="/guides/support-and-on-call.html">Support and on call</a></li>
      
      <li><a href="/guides/team-and-project-scheduling.html">Team and project scheduling</a></li>
      
      <li><a href="/guides/team-changes-and-handovers.html">Team changes and handovers</a></li>
      
      <li><a href="/guides/tone-of-voice.html">Tone of voice</a></li>
      
      <li><a href="/guides/moving-a-repo-to-github.html">Transferring a repo from git.dxw.net to github</a></li>
      
      <li><a href="/guides/web-accessibility.html">Web accessibility</a></li>
      
      <li><a href="/guides/web-analytics.html">Web analytics</a></li>
      
      <li><a href="/guides/web-performance.html">Web performance</a></li>
      
      <li><a href="/guides/working-remotely.html">Working remotely</a></li>
      
      <li><a href="/guides/wrapping-up-a-project.html">Wrapping up a project</a></li>
      
    </ul>
  </li>
</ul>

<div class="logo">
  <a href="/" title="Back to Playbook home page">
    <img src="/dist/dmark.png" alt="" width="32" height="32" />
  </a>
</div>
</nav>
    <aside class="sidebar">
      <div class="search" role="search">
        <div class="input-wrap">
          <input
            type="search"
            value=""
            aria-label="Search text"
            placeholder="Type to search"
          />
        </div>
        <div class="results-panel"></div>
      </div>
      <nav class="sidebar-nav" aria-label="sidebar">      <h1 class="page-title">Development workflow</h1>
      <ul>
        <li data-title="Introduction" data-content="Development principlesDevelopment principles can be found in the development profession.">
          <a href="#introduction" data-target="introduction">Introduction</a>
                <ul>
        <li data-title="Development principles" data-content="Development principles can be found in the development profession.">
          <a href="#development-principles" data-target="development-principles">Development principles</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="The lifecycle of a story" data-content="Different projects have small variations to this process, but here are some
general guidelines.">
          <a href="#the-lifecycle-of-a-story" data-target="the-lifecycle-of-a-story">The lifecycle of a story</a>
                <ul>
        <li data-title="Start work on a new story" data-content="
  assign yourself to the Trello card
  move the card to indicate you’ve started work
  make a new branch from the active development branch
  write tested code that meets the acceptance criteria
  update the changelog
  commit your code
">
          <a href="#start-work-on-a-new-story" data-target="start-work-on-a-new-story">Start work on a new story</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Submit your story for code review" data-content="
  
    push your branch to the remote repository

    git push origin <branch-name>
    
  
  create a pull request into the active development branch
  link the Trello card to the new pull request, linking directly or by using
the Trello
power up
  update the card to indicate it’s now ready for review by a peer
">
          <a href="#submit-your-story-for-code-review" data-target="submit-your-story-for-code-review">Submit your story for code review</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Reviewing another developer’s pull request" data-content="
  update the Trello card to indicate you’re now looking at it
  find and read the Trello card’s user need or acceptance criteria
  find and read through the pull request, carrying out a
code review
    
      if you think it’s ready:
        
          leave your feedback (positive comments are great to receive)
          approve the pull request
        
      
      if you think it’s not ready:
        
          leave your feedback
          consider letting the author know by Slack that it’s back with them
        
      
    
  
GitHub offers us a number of options when finalising a review. These may be
interpreted and used differently depending on style but a good rule of thumb to
get started could be:
  Approve - I am confident that this pull request can safely be merged in. I MAY
also leave optional suggestions which the reviewer MAY want to consider
  Comment - I may not be confident in the change, in which case I should explain
why this SHOULD NOT be merged yet and what SHOULD be considered. Alternatively
I might not feel confident enough to approve this pull request but MAY have
suggestions that SHOULD be considered
  Request changes (not available on GitLab) - This may be used to further
indicate that this pull request SHOULD NOT be merged. It may contain severe
issues such as security concerns or bugs which might have a serious impact.
This option is used to explicitly nullify any other review that chose approval
">
          <a href="#reviewing-another-developers-pull-request" data-target="reviewing-another-developers-pull-request">Reviewing another developer’s pull request</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Working on a support ticket" data-content="Support tickets can fall into two types of work flow depending on their
severity.Most commonly tickets will simply fall into the same
story process, where fixes will go through
develop and Staging for review and acceptance.They can however be sometimes when there’s an emergency which requires a change
to production ASAP. This is when we reach for a hotfix.">
          <a href="#working-on-a-support-ticket" data-target="working-on-a-support-ticket">Working on a support ticket</a>
                <ul>
        <li data-title="Hotfix" data-content="We think of hotfixes in the same way as
Wikipedia describes them:
  a hotfix implies that the change may have been made quickly and outside normal
development and testing processes
and also
  A hotfix is a change deemed critical enough that it cannot be held off until a
regular content patch.
An emergency for instance would be when:
  production is unusable - users are directly affected
  a serious vulnerability has been discovered and is currently exploitable
">
          <a href="#hotfix" data-target="hotfix">Hotfix</a>
                <ul>
        <li data-title="Issue a hotfix" data-content="When the decision to make a hotfix is made it’s important to communicate well.
Involve the rest of the team at this point and discuss the plan of action,
allowing delivery managers to communicate back to the client.This is the only time a branch should be based off of master instead of
develop.
  create a new card in Trello and move it to ‘In progress’
  
    create a new branch off of master

    git checkout -b <branch-name> origin/master
    
  
  commit the fix
  make a pull request into master
  move the Trello card into ‘Awaiting review’
">
          <a href="#issue-a-hotfix" data-target="issue-a-hotfix">Issue a hotfix</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Review and deploy a hotfix" data-content="
  review the code
  check the fix has been tested locally if possible
  merge the pull request
  
    manually merge the pull request back into develop

    git checkout develop
git pull
git merge origin/master
git push
    
  
  move the card on Trello into ‘Deployed to production’
  update the changelog
">
          <a href="#review-and-deploy-a-hotfix" data-target="review-and-deploy-a-hotfix">Review and deploy a hotfix</a>
          
        </li>
      </ul>

        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Deploying" data-content="Our approach is one of
continuous delivery meaning
we build, test and deploy as frequently as possible.We do this by using services such as Chef, TravisCI or GitHub Actions which are
configured to listen for Git pushes and then initiate an automatic deployment.Whilst these deployments should be automatic it should be noted that they can
take a short time to run.">
          <a href="#deploying" data-target="deploying">Deploying</a>
                <ul>
        <li data-title="Staging" data-content="Staging deployments are automatic and should be initiated when each pull request
is merged to the working branch, usually develop.">
          <a href="#staging" data-target="staging">Staging</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Production" data-content="Production deployments are triggered manually by merging into main.We do not have a standard release process though recent services follow a
process such as
this example.A basic process:
  review what work is currently awaiting deployment by looking at Trello, if
there are any unaccepted stories then you should hold off
  update the changelog
  let the team know you’re deploying to Production
  tag the merge commit with the version matching the
changelog
  verify the deployment has been successful with smoke tests
  update Trello cards to indicate that they have now been deployed
">
          <a href="#production" data-target="production">Production</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Branching" data-content="How to make a branchCreate the branch off of develop:git fetch
git checkout -b <branch-name> origin/develop
">
          <a href="#branching" data-target="branching">Branching</a>
                <ul>
        <li data-title="How to make a branch" data-content="Create the branch off of develop:git fetch
git checkout -b <branch-name> origin/develop
">
          <a href="#how-to-make-a-branch" data-target="how-to-make-a-branch">How to make a branch</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Naming the branch" data-content="Having a convention means:
  all branches connected to a story or ticket are easily connected now and in
the future
  others can easily identify the intent of the contents without having to
interpret a branch name
  small and concise branches which keep the focus on the type of change being
made are encouraged
">
          <a href="#naming-the-branch" data-target="naming-the-branch">Naming the branch</a>
                <ul>
        <li data-title="Branch prefixes" data-content="
  
    Feature

    A branch that adds a new feature, as defined by the specified story

    Example: feature/523797477-add-logging-to-registration
  
  
    Fix

    A branch that corrects a problem in a feature already merged into the
development branch

    Example: fix/423797477-logging-happens-in-both-environments
  
  
    Chore

    Chore branches are used for routine tasks for maintaining the application like
package upgrades, they don’t provide a new feature or fix an existing one

    Example: chore/1934729239-reduce-caching-for-contact-details
  
  
    Refactor

    Refactor branches only include changes that do not change the systems outward
behaviour or interface.

    Example: refactor/243234-api-serves-response-more-efficiently
  
  
    Hotfix

    A branch that adds an urgent fix to a problem that affects production. These
branches are based on the production branch and do not go via the development
branch, so must be also be merged into the latter when deployed

    Example: hotfix/253947623-remove-breaking-change-to-repair-creation
  
">
          <a href="#branch-prefixes" data-target="branch-prefixes">Branch prefixes</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Update your branch with the latest changes (rebasing)" data-content="When working in a team, other pull requests will often get merged in before
yours is finished. It’s important to make sure you’re developing against the
latest version of the code base as much as possible.You can do this by rebasing your work on top of the develop branch.git checkout <branch-name>
git rebase origin/develop
git push --force-with-lease
During the rebase there may be conflicts which should be resolved at that point.
If in doubt talk to the other developer who you’re conflicting with and reason
out what the correct state should be.Force pushing in this situation is the only time it should be necessary, adding
--force-with-lease ensures you don’t accidentally overwrite someone else’s
additions.">
          <a href="#update-your-branch-with-the-latest-changes-rebasing" data-target="update-your-branch-with-the-latest-changes-rebasing">Update your branch with the latest changes (rebasing)</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Committing" data-content="Good commits are small, focused and self-contained.Code is written once, changed occasionally but read frequently. By taking the
time to document what we’ve built and why, we enable others to build their
shared understanding of the codebase too. Once we have a stronger shared
understanding we are able to make more informed decisions, avoid repeated
effort, receive more valuable feedback and spot new opportunities.">
          <a href="#committing" data-target="committing">Committing</a>
                <ul>
        <li data-title="What to include" data-content="Helpful questions to ask yourself when organising the content of your commit:
  is the code focused on a single problem? Commits should be small and focused
rather than trying to do multiple things at once
  is the code refactoring existing behaviour or introducing a behavioural
change? Refactorings can often be noisy and make it hard to see the new
changes within. Split commits based on the the type of change
  are the unit tests included? Each new commit should keep the test suite green
  is a
changelog entry
or architecture decision record necessary?
">
          <a href="#what-to-include" data-target="what-to-include">What to include</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="What to write" data-content="Taking the time to write good commits is as valuable as writing good code. They
record the story of each repository, line by line, which makes it possible to
reason about now and in the future.Helpful questions to ask yourself when writing a commit message:
  what is the new behaviour of the application?
  have I written down why I chose this approach over the others?
  are there relevant links I could include to help the next person understand?
  have I documented any risks, foreseen pitfalls or potential consequences?
  are there relevant links I could include to help the reader get the same
information I had when making my decision?
  have I called out any subtleties in the implementation that are worth drawing
attention to or explaining?
">
          <a href="#what-to-write" data-target="what-to-write">What to write</a>
                <ul>
        <li data-title="Examples" data-content="# Before
Add job postings

# After
Job postings are now displayed on the landing page

- Getting the Job postings out of the external API proved difficult but I think
  the solution we have will allow us to easily upgrade to the new release they
  have planned: <link>
# Before
Fixed the form

# After
Food order form works with special characters

- Previously the form failed to send if the starter value included any of the
  following characters: `!@£$%^&`
- Users should be able to use these characters and after a short investigation
  I found this new bug in PHP: <link>
- As a short term workaround until the bug is fixed I am stripping out any of
  these characters if they are present.
# Before
Gem upgrade

# After
Upgrade widget to v1.2.1

- This widget now includes a patch that improves resilience: <link>
- We are still unable to upgrade to v2.x as we need to do some migration work
  first
">
          <a href="#examples" data-target="examples">Examples</a>
          
        </li>
      </ul>

        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Code review" data-content="Code reviews help us ship better quality code and provide an opportunity to
learn from each other.">
          <a href="#code-review" data-target="code-review">Code review</a>
                <ul>
        <li data-title="How to begin" data-content="To help review code changes you can
enable split review within GitHub.Pull requests include a lot buttons and information that are all competing for
our attention. There are several ways we can view the information so having a
plan can be helpful. Here is an example of what a good and thorough review looks
like:
  read the description to help you understand what we are doing and why. If
it’s unclear, stopping to find out will likely lead to a more valuable review
  check the status is “Open” and that all “Checks” have passed. If this isn’t
the case it may not be ready for a review. We want to review a stable set of
changes that aren’t still being worked on. Ask the author if in doubt
  scan through the “Files changed” tab briefly to peak at the new state of the
system to get your bearings, we are looking at the general size of the change
as well as the different entities involved (optional)
  first pass (read) - Go to the the “Commit” tab, here we will see all the
individual commits with the oldest at the top. Go into the oldest commit and
start navigating using the “Next” button. Read the description and the
contents with the aim of understanding each change and its rationale. Make
quick notes to yourself for areas of interest you’d like to come back to, the
trick is to make these low cost so we can maintain focus. Writing thoughtful
feedback takes time and we may even find that the situation changes in later
commits, making the feedback redundant
  second pass (review) - Now is the time to leave feedback. Go back to the
oldest commit and this time as you go through think about the following,
leaving comments on the nearest line where appropriate:
    
      did you have a note for this commit? Now is the time to explore and test
any alternative ideas before making recommendations
      use the following checklist to help assess the
contents
    
  
  submit your review and let the author know
Tip: You can add ?w=1 to the end of the URL to strip out noisy whitespace.">
          <a href="#how-to-begin" data-target="how-to-begin">How to begin</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="What to look for" data-content="When performing a code review we:
  check the pull request is descriptive, explains the story and doesn’t assume
knowledge. Some templates ask for screenshots to help illustrate the change
before and after
  check the code is safe
(OWASP top ten) (Brakeman should be
checking for obvious issues automatically)
  check the code follows a consistent style (Standard should be checking this
automatically)
  check the code is readable (did you find it easy to build an understanding?)
  check the code for maintainability
(SOLID principles)
  check the code is tested (Test suites and Coverage tools should check
automatically)
  check the code is unlikely to introduce future bugs (this is tricky to do and
it’s okay if you don’t find any as we fail fast and fix)
  check the commits are reasonably small and focused towards making one change.
They should not include unexpected or unrelated changes
  check the commits messages are descriptive
  check the changelog has been updated
">
          <a href="#what-to-look-for" data-target="what-to-look-for">What to look for</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Writing feedback" data-content="It is not important that a story be implemented exactly how you would have done
it, only that it meets the acceptance criteria. When we find problems we give
feedback to the author rather than fix things ourselves inline with our
principle of ‘Own your code’.It’s important that code reviews have a constructive and amicable tone. A
helpful mindset is one of assuming good intent. Be mindful that you might not
have all the information and so ask questions such as “Why did you do this like
X?” rather than “You should do it this like Y!”.Summarise your feedback. Be clear on which points require further action and
which are advisory. You should both feel confident about what’s necessary and
what to expect in order to move forward.Thoughtbot’s
code review guide contains good rules for keeping the tone positive.">
          <a href="#writing-feedback" data-target="writing-feedback">Writing feedback</a>
          
        </li>
      </ul>

        </li>
      </ul>
      <ul>
        <li data-title="Code style" data-content="We write our code in a consistent way to ensure it is well-structured and easy
to follow for the rest of the team. Similar to the guidelines laid out in
Thoughtbot’s style guide,
approach this guidance as a way to code on present and future projects, not
something to retroactively add to existing projects.
  PHP -
PSR-2
  Ruby -
Ruby community style guide
  Sass -
Sass Guidelines - Syntax and formatting
  JavaScript - Standard
When joining an existing code base we suggest following any existing code style
rather than changing it.">
          <a href="#code-style" data-target="code-style">Code style</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Pull requests" data-content="When we have finished a piece of work on a branch, we
make a pull request
using the project’s GitHub/GitLab page.We link each pull request with the related Trello card to make it easier to
find. We could prefix the card number to the pull request title or link to the
card directly within the description or a comment.A good pull request should:
  link to the Trello card for extra context, but not rely on Trello cards alone
as they can be easily removed or moved
  describe the problem without assuming the reader has existing context
  highlight the changes being made
  describe and bring attention to particular difficulties or areas that you
particularly want the opinion of the reviewer
  include screenshots for user facing changes (following the pull request
template prompts)
  be clear which acceptance criteria are being met and which aren’t if there is
follow up work to do
  explain if a task is being broken down into multiple pull requests and what
the review order should be
  describe any follow up work or steps that need to be done to complete the task
  be focused on a single problem, preferring to split additional problems into
other pull requests - the smaller the pull request, the easier it is to be
reviewed and the quicker it is likely to be merged
  describe any consequences of the work
  update the changelog
Real examples:
  Cristina
  Dom
  Ed
  George
  James C
  Laura
  Lawrence
  Leeky
  Lorna
  Meyric
  Nick
  Robbie
  Stuart
">
          <a href="#pull-requests" data-target="pull-requests">Pull requests</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Versioning releases" data-content="We don’t use explicit versioning for application code; rather we operate a
continuous deployment approach as described in the deploying
section.However, when building libraries, APIs, or other software components designed
for reuse, versioning is important. All reusable components should have properly
versioned releases. This includes Wordpress plugins and themes, Ruby gems, and
so on, whether open source or otherwise.Versioning should follow the Semantic Versioning standard,
and projects that use them should specify their requirements so that the
appropriate versions are used.Releases should be created by:
  updating the version appropriately in package metadata and committing to git
  updating the changelog to draw a line under changes and
attribute them to a version
  tagging that commit using a tag of the form vX.Y.Z
  building the appropriate release package from that tag
">
          <a href="#versioning-releases" data-target="versioning-releases">Versioning releases</a>
          
        </li>
      </ul>
      <ul>
        <li data-title="Tracking changes" data-content="If a project is not continuously released, and has staged releases, we want to
track what goes into those releases, so we can be confident about what we’re
shipping, know when we shipped it, and share what we’ve done with our clients
(and maybe beyond).Including a CHANGELOG.md file in the root of a repository is a standard for
tracking these changes against versions, but the only work if they are updated.
When introducing a significant change to a project, we should be recording that
change at the time we make it, while the issue is fresh in our minds.We follow the Keep a Changelog 1.0.0
format for the changelogs we keep. This means integrating updating the changelog
into the release process for the project. This also means
versioning the project.If the team decides that a changelog is not appropriate for a project, you
should document that decision as an
Architectural Decision Record (ADR), so future
maintainers and contributors understand the reasoning for not doing so.See
Tech Team RFC-019
for more context around this decision.">
          <a href="#tracking-changes" data-target="tracking-changes">Tracking changes</a>
          
        </li>
      </ul>
</nav>
    </aside>
    <main>
      <section class="content">
        <article class="markdown-section" id="main">
          <h1>Development workflow</h1>
          <ul>
  <li><a href="#development-principles">Development principles</a></li>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#the-lifecycle-of-a-story">The lifecycle of a story</a></li>
  <li><a href="#working-on-a-support-ticket">Working on a support ticket</a></li>
  <li><a href="#deploying">Deploying</a></li>
  <li><a href="#branching">Branching</a></li>
  <li><a href="#committing">Committing</a></li>
  <li><a href="#code-review">Code review</a></li>
  <li><a href="#code-style">Code style</a></li>
  <li><a href="#pull-requests">Pull requests</a></li>
  <li><a href="#versioning-releases">Versioning releases</a></li>
  <li><a href="#tracking-changes">Tracking changes</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<h3 id="development-principles">Development principles</h3>

<p><a href="../_includes/sections/our-professions/development.md#development-team-principles">Development principles can be found in the development profession.</a></p>

<hr />

<h2 id="the-lifecycle-of-a-story">The lifecycle of a story</h2>

<p>Different projects have small variations to this process, but here are some
general guidelines.</p>

<h3 id="start-work-on-a-new-story">Start work on a new story</h3>

<ol>
  <li>assign yourself to the Trello card</li>
  <li>move the card to indicate you’ve started work</li>
  <li><a href="#how-to-make-a-branch">make a new branch from the active development branch</a></li>
  <li>write tested code that meets the acceptance criteria</li>
  <li>update the <a href="#tracking-changes">changelog</a></li>
  <li><a href="#committing">commit</a> your code</li>
</ol>

<h3 id="submit-your-story-for-code-review">Submit your story for code review</h3>

<ol>
  <li>
    <p>push your branch to the remote repository</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push origin &lt;branch-name&gt;
</code></pre></div>    </div>
  </li>
  <li>create a <a href="#pull-requests">pull request</a> into the active development branch</li>
  <li>link the Trello card to the new pull request, linking directly or by using
the Trello
<a href="https://help.trello.com/article/1021-integrating-trello-with-zendesk">power up</a></li>
  <li>update the card to indicate it’s now ready for review by a peer</li>
</ol>

<h3 id="reviewing-another-developers-pull-request">Reviewing another developer’s pull request</h3>

<ul>
  <li>update the Trello card to indicate you’re now looking at it</li>
  <li>find and read the Trello card’s user need or acceptance criteria</li>
  <li>find and read through the pull request, carrying out a
<a href="#code-review">code review</a>
    <ul>
      <li>if you think it’s ready:
        <ul>
          <li>leave your feedback (positive comments are great to receive)</li>
          <li>approve the pull request</li>
        </ul>
      </li>
      <li>if you think it’s not ready:
        <ul>
          <li>leave your feedback</li>
          <li>consider letting the author know by Slack that it’s back with them</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>GitHub offers us a number of options when finalising a review. These may be
interpreted and used differently depending on style but a good rule of thumb to
get started could be:</p>

<ul>
  <li>Approve - I am confident that this pull request can safely be merged in. I MAY
also leave optional suggestions which the reviewer MAY want to consider</li>
  <li>Comment - I may not be confident in the change, in which case I should explain
why this SHOULD NOT be merged yet and what SHOULD be considered. Alternatively
I might not feel confident enough to approve this pull request but MAY have
suggestions that SHOULD be considered</li>
  <li>Request changes (not available on GitLab) - This may be used to further
indicate that this pull request SHOULD NOT be merged. It may contain severe
issues such as security concerns or bugs which might have a serious impact.
This option is used to explicitly nullify any other review that chose approval</li>
</ul>

<hr />

<h2 id="working-on-a-support-ticket">Working on a support ticket</h2>

<p>Support tickets can fall into two types of work flow depending on their
severity.</p>

<p>Most commonly tickets will simply fall into the same
<a href="#the-lifecycle-of-a-story">story process</a>, where fixes will go through
<code class="language-plaintext highlighter-rouge">develop</code> and Staging for review and acceptance.</p>

<p>They can however be sometimes when there’s an emergency which requires a change
to production ASAP. This is when we reach for a <a href="#hotfix">hotfix</a>.</p>

<h3 id="hotfix">Hotfix</h3>

<p>We think of hotfixes in the same way as
<a href="https://en.wikipedia.org/wiki/Hotfix">Wikipedia</a> describes them:</p>

<blockquote>
  <p>a hotfix implies that the change may have been made quickly and outside normal
development and testing processes</p>
</blockquote>

<p>and also</p>

<blockquote>
  <p>A hotfix is a change deemed critical enough that it cannot be held off until a
regular content patch.</p>
</blockquote>

<p>An emergency for instance would be when:</p>

<ol>
  <li>production is unusable - users are directly affected</li>
  <li>a serious vulnerability has been discovered and is currently exploitable</li>
</ol>

<h4 id="issue-a-hotfix">Issue a hotfix</h4>

<p>When the decision to make a hotfix is made it’s important to communicate well.
Involve the rest of the team at this point and discuss the plan of action,
allowing delivery managers to communicate back to the client.</p>

<p>This is the only time a branch should be based off of <code class="language-plaintext highlighter-rouge">master</code> instead of
<code class="language-plaintext highlighter-rouge">develop</code>.</p>

<ol>
  <li>create a new card in Trello and move it to ‘In progress’</li>
  <li>
    <p>create a new branch off of <code class="language-plaintext highlighter-rouge">master</code></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout -b &lt;branch-name&gt; origin/master
</code></pre></div>    </div>
  </li>
  <li><a href="#committing">commit</a> the fix</li>
  <li>make a <a href="#pull-requests">pull request</a> into <code class="language-plaintext highlighter-rouge">master</code></li>
  <li>move the Trello card into ‘Awaiting review’</li>
</ol>

<h4 id="review-and-deploy-a-hotfix">Review and deploy a hotfix</h4>

<ol>
  <li>review the code</li>
  <li>check the fix has been tested locally if possible</li>
  <li>merge the pull request</li>
  <li>
    <p>manually merge the pull request back into <code class="language-plaintext highlighter-rouge">develop</code></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout develop
git pull
git merge origin/master
git push
</code></pre></div>    </div>
  </li>
  <li>move the card on Trello into ‘Deployed to production’</li>
  <li>update the <a href="#tracking-changes">changelog</a></li>
</ol>

<hr />

<h2 id="deploying">Deploying</h2>

<p>Our approach is one of
<a href="https://en.wikipedia.org/wiki/Continuous_delivery">continuous delivery</a> meaning
we build, test and deploy as frequently as possible.</p>

<p>We do this by using services such as Chef, TravisCI or GitHub Actions which are
configured to listen for Git pushes and then initiate an automatic deployment.</p>

<p>Whilst these deployments should be automatic it should be noted that they can
take a short time to run.</p>

<h3 id="staging">Staging</h3>

<p>Staging deployments are automatic and should be initiated when each pull request
is merged to the working branch, usually <code class="language-plaintext highlighter-rouge">develop</code>.</p>

<h3 id="production">Production</h3>

<p>Production deployments are triggered manually by merging into <code class="language-plaintext highlighter-rouge">main</code>.</p>

<p>We do not have a standard release process though recent services follow a
process such as
<a href="https://github.com/DFE-Digital/buy-for-your-school/blob/develop/doc/release-process.md">this example</a>.</p>

<p>A basic process:</p>

<ol>
  <li>review what work is currently awaiting deployment by looking at Trello, if
there are any unaccepted stories then you should hold off</li>
  <li>update the <a href="#tracking-changes">changelog</a></li>
  <li>let the team know you’re deploying to Production</li>
  <li>tag the merge commit with the version matching the
<a href="#tracking-changes">changelog</a></li>
  <li>verify the deployment has been successful with smoke tests</li>
  <li>update Trello cards to indicate that they have now been deployed</li>
</ol>

<hr />

<h2 id="branching">Branching</h2>

<h3 id="how-to-make-a-branch">How to make a branch</h3>

<p>Create the branch off of <code class="language-plaintext highlighter-rouge">develop</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch
git checkout -b &lt;branch-name&gt; origin/develop
</code></pre></div></div>

<h3 id="naming-the-branch">Naming the branch</h3>

<p>Having a convention means:</p>

<ul>
  <li>all branches connected to a story or ticket are easily connected now and in
the future</li>
  <li>others can easily identify the intent of the contents without having to
interpret a branch name</li>
  <li>small and concise branches which keep the focus on the type of change being
made are encouraged</li>
</ul>

<h4 id="branch-prefixes">Branch prefixes</h4>

<ul>
  <li>
    <p><strong>Feature</strong></p>

    <p>A branch that adds a new feature, as defined by the specified story</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">feature/523797477-add-logging-to-registration</code></p>
  </li>
  <li>
    <p><strong>Fix</strong></p>

    <p>A branch that corrects a problem in a feature already merged into the
development branch</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">fix/423797477-logging-happens-in-both-environments</code></p>
  </li>
  <li>
    <p><strong>Chore</strong></p>

    <p>Chore branches are used for routine tasks for maintaining the application like
package upgrades, they don’t provide a new feature or fix an existing one</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">chore/1934729239-reduce-caching-for-contact-details</code></p>
  </li>
  <li>
    <p><strong>Refactor</strong></p>

    <p>Refactor branches only include changes that do not change the systems outward
behaviour or interface.</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">refactor/243234-api-serves-response-more-efficiently</code></p>
  </li>
  <li>
    <p><strong>Hotfix</strong></p>

    <p>A branch that adds an urgent fix to a problem that affects production. These
branches are based on the production branch and do not go via the development
branch, so must be also be merged into the latter when deployed</p>

    <p>Example: <code class="language-plaintext highlighter-rouge">hotfix/253947623-remove-breaking-change-to-repair-creation</code></p>
  </li>
</ul>

<h3 id="update-your-branch-with-the-latest-changes-rebasing">Update your branch with the latest changes (rebasing)</h3>

<p>When working in a team, other pull requests will often get merged in before
yours is finished. It’s important to make sure you’re developing against the
latest version of the code base as much as possible.</p>

<p>You can do this by rebasing your work on top of the <code class="language-plaintext highlighter-rouge">develop</code> branch.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout &lt;branch-name&gt;
git rebase origin/develop
git push --force-with-lease
</code></pre></div></div>

<p>During the rebase there may be conflicts which should be resolved at that point.
If in doubt talk to the other developer who you’re conflicting with and reason
out what the correct state should be.</p>

<p>Force pushing in this situation is the only time it should be necessary, adding
<code class="language-plaintext highlighter-rouge">--force-with-lease</code> ensures you don’t accidentally overwrite someone else’s
additions.</p>

<hr />

<h2 id="committing">Committing</h2>

<p>Good commits are small, focused and self-contained.</p>

<p>Code is written once, changed occasionally but read frequently. By taking the
time to document what we’ve built and why, we enable others to build their
shared understanding of the codebase too. Once we have a stronger shared
understanding we are able to make more informed decisions, avoid repeated
effort, receive more valuable feedback and spot new opportunities.</p>

<h3 id="what-to-include">What to include</h3>

<p>Helpful questions to ask yourself when organising the content of your commit:</p>

<ul>
  <li>is the code focused on a single problem? Commits should be small and focused
rather than trying to do multiple things at once</li>
  <li>is the code refactoring existing behaviour or introducing a behavioural
change? Refactorings can often be noisy and make it hard to see the new
changes within. Split commits based on the the type of change</li>
  <li>are the unit tests included? Each new commit should keep the test suite green</li>
  <li>is a
<a href="https://github.com/dxw/tech-team-rfcs/blob/main/rfc-019-use-changelogs-to-track-changes.md">changelog entry</a>
or architecture decision record necessary?</li>
</ul>

<h3 id="what-to-write">What to write</h3>

<p>Taking the time to write good commits is as valuable as writing good code. They
record the story of each repository, line by line, which makes it possible to
reason about now and in the future.</p>

<p>Helpful questions to ask yourself when writing a commit message:</p>

<ul>
  <li>what is the <strong>new</strong> behaviour of the application?</li>
  <li>have I written down <strong>why</strong> I chose this approach over the others?</li>
  <li>are there relevant links I could include to help the next person understand?</li>
  <li>have I documented any risks, foreseen pitfalls or potential consequences?</li>
  <li>are there relevant links I could include to help the reader get the same
information I had when making my decision?</li>
  <li>have I called out any subtleties in the implementation that are worth drawing
attention to or explaining?</li>
</ul>

<h4 id="examples">Examples</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Before
Add job postings

# After
Job postings are now displayed on the landing page

- Getting the Job postings out of the external API proved difficult but I think
  the solution we have will allow us to easily upgrade to the new release they
  have planned: &lt;link&gt;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Before
Fixed the form

# After
Food order form works with special characters

- Previously the form failed to send if the starter value included any of the
  following characters: `!@£$%^&amp;`
- Users should be able to use these characters and after a short investigation
  I found this new bug in PHP: &lt;link&gt;
- As a short term workaround until the bug is fixed I am stripping out any of
  these characters if they are present.
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Before
Gem upgrade

# After
Upgrade widget to v1.2.1

- This widget now includes a patch that improves resilience: &lt;link&gt;
- We are still unable to upgrade to v2.x as we need to do some migration work
  first
</code></pre></div></div>

<hr />

<h2 id="code-review">Code review</h2>

<p>Code reviews help us ship better quality code and provide an opportunity to
learn from each other.</p>

<h3 id="how-to-begin">How to begin</h3>

<p>To help review code changes you can
<a href="https://docs.github.com/en/github/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#diff-view-options">enable split review within GitHub</a>.</p>

<p>Pull requests include a lot buttons and information that are all competing for
our attention. There are several ways we can view the information so having a
plan can be helpful. Here is an example of what a good and thorough review looks
like:</p>

<ol>
  <li>read the description to help you understand what we are doing and why. If
it’s unclear, stopping to find out will likely lead to a more valuable review</li>
  <li>check the status is “Open” and that all “Checks” have passed. If this isn’t
the case it may not be ready for a review. We want to review a stable set of
changes that aren’t still being worked on. Ask the author if in doubt</li>
  <li>scan through the “Files changed” tab briefly to peak at the new state of the
system to get your bearings, we are looking at the general size of the change
as well as the different entities involved (optional)</li>
  <li>first pass (read) - Go to the the “Commit” tab, here we will see all the
individual commits with the oldest at the top. Go into the oldest commit and
start navigating using the “Next” button. Read the description and the
contents with the aim of understanding each change and its rationale. Make
quick notes to yourself for areas of interest you’d like to come back to, the
trick is to make these low cost so we can maintain focus. Writing thoughtful
feedback takes time and we may even find that the situation changes in later
commits, making the feedback redundant</li>
  <li>second pass (review) - Now is the time to leave feedback. Go back to the
oldest commit and this time as you go through think about the following,
leaving comments on the nearest line where appropriate:
    <ul>
      <li>did you have a note for this commit? Now is the time to explore and test
any alternative ideas before making recommendations</li>
      <li>use the <a href="#what-to-look-for">following checklist</a> to help assess the
contents</li>
    </ul>
  </li>
  <li>submit your review and let the author know</li>
</ol>

<p>Tip: You can add <code class="language-plaintext highlighter-rouge">?w=1</code> to the end of the URL to strip out noisy whitespace.</p>

<h3 id="what-to-look-for">What to look for</h3>

<p>When performing a code review we:</p>

<ul>
  <li>check the pull request is descriptive, explains the story and doesn’t assume
knowledge. Some templates ask for screenshots to help illustrate the change
before and after</li>
  <li>check the code is safe
(<a href="https://owasp.org/www-project-top-ten/">OWASP top ten</a>) (Brakeman should be
checking for obvious issues automatically)</li>
  <li>check the code follows a consistent style (Standard should be checking this
automatically)</li>
  <li>check the code is readable (did you find it easy to build an understanding?)</li>
  <li>check the code for maintainability
(<a href="https://www.digitalocean.com/community/conceptual_articles/s-o-l-i-d-the-first-five-principles-of-object-oriented-design">SOLID principles</a>)</li>
  <li>check the code is tested (Test suites and Coverage tools should check
automatically)</li>
  <li>check the code is unlikely to introduce future bugs (this is tricky to do and
it’s okay if you don’t find any as we fail fast and fix)</li>
  <li>check the commits are reasonably small and focused towards making one change.
They should not include unexpected or unrelated changes</li>
  <li>check the commits messages are descriptive</li>
  <li>check the <a href="#tracking-changes">changelog</a> has been updated</li>
</ul>

<h3 id="writing-feedback">Writing feedback</h3>

<p>It is not important that a story be implemented exactly how you would have done
it, only that it meets the acceptance criteria. When we find problems we give
feedback to the author rather than fix things ourselves inline with our
principle of <a href="#own-your-code">‘Own your code’</a>.</p>

<p>It’s important that code reviews have a constructive and amicable tone. A
helpful mindset is one of assuming good intent. Be mindful that you might not
have all the information and so ask questions such as “Why did you do this like
X?” rather than “You should do it this like Y!”.</p>

<p>Summarise your feedback. Be clear on which points require further action and
which are advisory. You should both feel confident about what’s necessary and
what to expect in order to move forward.</p>

<p><a href="https://github.com/thoughtbot/guides/tree/master/code-review">Thoughtbot’s</a>
code review guide contains good rules for keeping the tone positive.</p>

<hr />

<h2 id="code-style">Code style</h2>

<p>We write our code in a consistent way to ensure it is well-structured and easy
to follow for the rest of the team. Similar to the guidelines laid out in
<a href="https://playbook.thoughtbot.com/#style-guide">Thoughtbot’s style guide</a>,
approach this guidance as a way to code on present and future projects, not
something to retroactively add to existing projects.</p>

<ul>
  <li>PHP -
<a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a></li>
  <li>Ruby -
<a href="https://github.com/bbatsov/ruby-style-guide">Ruby community style guide</a></li>
  <li>Sass -
<a href="https://sass-guidelin.es/#syntax--formatting">Sass Guidelines - Syntax and formatting</a></li>
  <li>JavaScript - <a href="https://standardjs.com/">Standard</a></li>
</ul>

<p>When joining an existing code base we suggest following any existing code style
rather than changing it.</p>

<hr />

<h2 id="pull-requests">Pull requests</h2>

<p>When we have finished a piece of work on a branch, we
<a href="https://help.github.com/articles/using-pull-requests/">make a pull request</a>
using the project’s GitHub/GitLab page.</p>

<p>We link each pull request with the related Trello card to make it easier to
find. We could prefix the card number to the pull request title or link to the
card directly within the description or a comment.</p>

<p>A good pull request should:</p>

<ul>
  <li>link to the Trello card for extra context, but not rely on Trello cards alone
as they can be easily removed or moved</li>
  <li>describe the problem without assuming the reader has existing context</li>
  <li>highlight the changes being made</li>
  <li>describe and bring attention to particular difficulties or areas that you
particularly want the opinion of the reviewer</li>
  <li>include screenshots for user facing changes (following the pull request
template prompts)</li>
  <li>be clear which acceptance criteria are being met and which aren’t if there is
follow up work to do</li>
  <li>explain if a task is being broken down into multiple pull requests and what
the review order should be</li>
  <li>describe any follow up work or steps that need to be done to complete the task</li>
  <li>be focused on a single problem, preferring to split additional problems into
other pull requests - the smaller the pull request, the easier it is to be
reviewed and the quicker it is likely to be merged</li>
  <li>describe any consequences of the work</li>
  <li>update the <a href="#tracking-changes">changelog</a></li>
</ul>

<p>Real examples:</p>

<ul>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1094">Cristina</a></li>
  <li><a href="https://github.com/dxw/judiciary-middleware/pull/497">Dom</a></li>
  <li><a href="https://github.com/dxw/judiciary-middleware/pull/631">Ed</a></li>
  <li><a href="https://github.com/dxw/mind-side-by-side/pull/307">George</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1155">James C</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/665">Laura</a></li>
  <li><a href="https://github.com/dxw/mind-side-by-side/pull/229">Lawrence</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1130">Leeky</a></li>
  <li><a href="https://github.com/DFE-Digital/buy-for-your-school/pull/318">Lorna</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1149">Meyric</a></li>
  <li><a href="https://github.com/DFE-Digital/buy-for-your-school/pull/188">Nick</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1087">Robbie</a></li>
  <li><a href="https://github.com/UKGovernmentBEIS/beis-report-official-development-assistance/pull/1121">Stuart</a></li>
</ul>

<hr />

<h2 id="versioning-releases">Versioning releases</h2>

<p>We don’t use explicit versioning for application code; rather we operate a
continuous deployment approach as described in the <a href="#deploying">deploying</a>
section.</p>

<p>However, when building libraries, APIs, or other software components designed
for reuse, versioning is important. All reusable components should have properly
versioned releases. This includes Wordpress plugins and themes, Ruby gems, and
so on, whether open source or otherwise.</p>

<p>Versioning should follow the <a href="https://semver.org">Semantic Versioning</a> standard,
and projects that use them should specify their requirements so that the
appropriate versions are used.</p>

<p>Releases should be created by:</p>

<ul>
  <li>updating the version appropriately in package metadata and committing to git</li>
  <li>updating the <a href="#tracking-changes">changelog</a> to draw a line under changes and
attribute them to a version</li>
  <li>tagging that commit using a tag of the form <code class="language-plaintext highlighter-rouge">vX.Y.Z</code></li>
  <li>building the appropriate release package from that tag</li>
</ul>

<hr />

<h2 id="tracking-changes">Tracking changes</h2>

<p>If a project is not continuously released, and has staged releases, we want to
track what goes into those releases, so we can be confident about what we’re
shipping, know when we shipped it, and share what we’ve done with our clients
(and maybe beyond).</p>

<p>Including a <code class="language-plaintext highlighter-rouge">CHANGELOG.md</code> file in the root of a repository is a standard for
tracking these changes against versions, but the only work if they are updated.
When introducing a significant change to a project, we should be recording that
change at the time we make it, while the issue is fresh in our minds.</p>

<p>We follow the <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog 1.0.0</a>
format for the changelogs we keep. This means integrating updating the changelog
into the release process for the project. This also means
<a href="#versioning-releases">versioning</a> the project.</p>

<p>If the team decides that a changelog is not appropriate for a project, you
should document that decision as an
<a href="https://adr.github.io/">Architectural Decision Record (ADR)</a>, so future
maintainers and contributors understand the reasoning for not doing so.</p>

<p>See
<a href="https://github.com/dxw/tech-team-rfcs/blob/master/rfc-019-use-changelogs-to-track-changes.md">Tech Team RFC-019</a>
for more context around this decision.</p>

        </article>
      </section>
    </main>
    <footer>
      <button class="sidebar-toggle" aria-label="Toggle Navigation">
        <div class="sidebar-toggle-button">
          <span></span><span></span><span></span>
        </div>
      </button>
    </footer>
    <script type="text/javascript" src="/dist/main.js"></script>
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
